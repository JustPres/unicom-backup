digraph UserInteractionFlow {
    // Graph settings
    rankdir=TB;
    node [shape=box, style=filled, fontname="Arial", fontsize=12];
    edge [fontname="Arial", fontsize=10];
    
    // Start
    Start [label="User Visits Website", shape=ellipse, fillcolor=lightgreen, fontsize=14];
    
    // Authentication Flow
    subgraph cluster_auth {
        label="Authentication";
        style=filled;
        color=lightblue;
        
        AuthCheck [label="Check if User is Logged In", fillcolor=lightyellow];
        LoginPage [label="Login Page", fillcolor=lightcoral];
        RegisterPage [label="Register Page", fillcolor=lightcoral];
        AdminLoginPage [label="Admin Login Page", fillcolor=lightcoral];
        
        AuthCheck -> LoginPage [label="Not Logged In"];
        AuthCheck -> RoleCheck [label="Logged In"];
        LoginPage -> RegisterPage [label="Need Account"];
        LoginPage -> AdminLoginPage [label="Admin Access"];
        LoginPage -> RoleCheck [label="Login Success"];
        RegisterPage -> RoleCheck [label="Registration Success"];
        AdminLoginPage -> RoleCheck [label="Admin Login Success"];
    }
    
    // Role-based Navigation
    RoleCheck [label="Determine User Role", fillcolor=lightyellow];
    
    // Public Pages (Available to All)
    subgraph cluster_public {
        label="Public Pages";
        style=filled;
        color=lightyellow;
        
        HomePage [label="Home Page", fillcolor=lightyellow];
        Catalog [label="Product Catalog", fillcolor=lightyellow];
        ProductDetail [label="Product Details", fillcolor=lightyellow];
        Compare [label="Compare Products", fillcolor=lightyellow];
        Services [label="Services Page", fillcolor=lightyellow];
        Support [label="Support Page", fillcolor=lightyellow];
        About [label="About Page", fillcolor=lightyellow];
        
        HomePage -> Catalog [label="Browse Products"];
        HomePage -> Services [label="View Services"];
        HomePage -> Support [label="Get Help"];
        HomePage -> About [label="Learn More"];
        Catalog -> ProductDetail [label="Click Product"];
        Catalog -> Compare [label="Compare Products"];
        ProductDetail -> Compare [label="Add to Compare"];
    }
    
    // Customer Flow
    subgraph cluster_customer {
        label="Customer Experience";
        style=filled;
        color=lightgreen;
        
        CustomerDashboard [label="Customer Dashboard", fillcolor=lightgreen];
        CustomerQuotes [label="My Quotes", fillcolor=lightgreen];
        CustomerProfile [label="Profile Settings", fillcolor=lightgreen];
        GetQuote [label="Request Quote", fillcolor=lightgreen];
        QuoteForm [label="Fill Quote Form", fillcolor=lightcyan];
        QuotationDialog [label="Review Quote", fillcolor=lightcyan];
        QuoteSubmitted [label="Quote Submitted", fillcolor=lightgreen];
        
        CustomerDashboard -> CustomerQuotes [label="View My Quotes"];
        CustomerDashboard -> GetQuote [label="Request New Quote"];
        CustomerDashboard -> CustomerProfile [label="Update Profile"];
        CustomerDashboard -> Catalog [label="Browse Products"];
        GetQuote -> QuoteForm [label="Start Quote Request"];
        QuoteForm -> QuotationDialog [label="Preview Quote"];
        QuotationDialog -> QuoteSubmitted [label="Confirm Quote"];
        QuotationDialog -> GetQuote [label="Cancel & Edit"];
        QuoteSubmitted -> CustomerQuotes [label="View Submitted Quote"];
        CustomerQuotes -> GetQuote [label="Request Another Quote"];
    }
    
    // Admin Flow
    subgraph cluster_admin {
        label="Admin Experience";
        style=filled;
        color=lightpink;
        
        AdminDashboard [label="Admin Dashboard", fillcolor=lightpink];
        AdminQuotes [label="Manage Quotes", fillcolor=lightpink];
        Inventory [label="Product Inventory", fillcolor=lightpink];
        Analytics [label="Analytics & Reports", fillcolor=lightpink];
        AddProduct [label="Add New Product", fillcolor=lightcyan];
        EditProduct [label="Edit Product", fillcolor=lightcyan];
        ApproveQuote [label="Approve Quote", fillcolor=lightcyan];
        RejectQuote [label="Reject Quote", fillcolor=lightcyan];
        
        AdminDashboard -> AdminQuotes [label="Manage Customer Quotes"];
        AdminDashboard -> Inventory [label="Manage Products"];
        AdminDashboard -> Analytics [label="View Reports"];
        AdminDashboard -> Catalog [label="Preview Catalog"];
        Inventory -> AddProduct [label="Add New Product"];
        Inventory -> EditProduct [label="Edit Existing Product"];
        AdminQuotes -> ApproveQuote [label="Approve Quote"];
        AdminQuotes -> RejectQuote [label="Reject Quote"];
        AddProduct -> Inventory [label="Product Added"];
        EditProduct -> Inventory [label="Product Updated"];
        ApproveQuote -> AdminQuotes [label="Quote Approved"];
        RejectQuote -> AdminQuotes [label="Quote Rejected"];
    }
    
    // Navigation Flow
    subgraph cluster_navigation {
        label="Navigation Options";
        style=filled;
        color=lightcyan;
        
        NavHome [label="Home", fillcolor=lightcyan];
        NavCatalog [label="Catalog", fillcolor=lightcyan];
        NavServices [label="Services", fillcolor=lightcyan];
        NavSupport [label="Support", fillcolor=lightcyan];
        NavAbout [label="About", fillcolor=lightcyan];
        NavProfile [label="Profile", fillcolor=lightcyan];
        NavLogout [label="Logout", fillcolor=lightcyan];
        
        NavHome -> HomePage;
        NavCatalog -> Catalog;
        NavServices -> Services;
        NavSupport -> Support;
        NavAbout -> About;
        NavProfile -> CustomerProfile [label="Customer"];
        NavProfile -> AdminDashboard [label="Admin"];
        NavLogout -> Start [label="Return to Home"];
    }
    
    // Main Flow Connections
    Start -> AuthCheck;
    RoleCheck -> CustomerDashboard [label="Customer Role"];
    RoleCheck -> AdminDashboard [label="Admin Role"];
    RoleCheck -> HomePage [label="Guest User"];
    
    // Cross-navigation
    CustomerDashboard -> HomePage [label="Go to Home"];
    AdminDashboard -> HomePage [label="Go to Home"];
    CustomerProfile -> CustomerDashboard [label="Back to Dashboard"];
    GetQuote -> CustomerDashboard [label="Back to Dashboard"];
    CustomerQuotes -> CustomerDashboard [label="Back to Dashboard"];
    AdminQuotes -> AdminDashboard [label="Back to Dashboard"];
    Inventory -> AdminDashboard [label="Back to Dashboard"];
    Analytics -> AdminDashboard [label="Back to Dashboard"];
    
    // Public access from authenticated pages
    CustomerDashboard -> Catalog [label="Browse Products"];
    AdminDashboard -> Catalog [label="Preview Products"];
    CustomerProfile -> Catalog [label="Browse Products"];
    
    // Styling
    Start [fillcolor=lightgreen, fontsize=14];
    RoleCheck [fillcolor=lightyellow];
    
    // Legend
    subgraph cluster_legend {
        label="User Interaction Legend";
        style=filled;
        color=white;
        
        LegendStart [label="Entry Point", fillcolor=lightgreen];
        LegendAuth [label="Authentication", fillcolor=lightblue];
        LegendPublic [label="Public Pages", fillcolor=lightyellow];
        LegendCustomer [label="Customer Flow", fillcolor=lightgreen];
        LegendAdmin [label="Admin Flow", fillcolor=lightpink];
        LegendComponents [label="UI Components", fillcolor=lightcyan];
        LegendNavigation [label="Navigation", fillcolor=lightcyan];
    }
}
